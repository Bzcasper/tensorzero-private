<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TensorZero Dashboard</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      .header {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .metric-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }
      .metric {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .status {
        color: green;
        font-weight: bold;
      }
      .error {
        color: red;
        font-weight: bold;
      }
      .warning {
        color: orange;
        font-weight: bold;
      }
      .loading {
        color: blue;
      }
      h1 {
        margin: 0;
        color: #333;
      }
      h3 {
        margin-top: 0;
        color: #666;
      }
      .refresh {
        background: #007acc;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
      }
      .refresh:hover {
        background: #005999;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>TensorZero Dashboard</h1>
        <p>Real-time monitoring of your AI video generation system</p>
        <button class="refresh" onclick="checkAll()">Refresh</button>
      </div>

      <div class="metric-grid">
        <div class="metric">
          <h3>Gateway Status</h3>
          <div id="gateway-status">Checking...</div>
        </div>

        <div class="metric">
          <h3>Router Status</h3>
          <div id="router-status">Checking...</div>
        </div>

        <div class="metric">
          <h3>API Status</h3>
          <div id="api-status">Checking...</div>
        </div>

        <div class="metric">
          <h3>Recent Activity</h3>
          <div id="activity">Loading...</div>
        </div>

        <div class="metric">
          <h3>System Health</h3>
          <div id="health">Loading...</div>
        </div>

        <div class="metric">
          <h3>Model Performance</h3>
          <div id="performance">Loading...</div>
        </div>
      </div>
    </div>

    <script>
      const gatewayUrl = "https://tensorzero-gateway.onrender.com";
      const routerUrl =
        "https://bzcasper--video-generation-router-serve-router.modal.run";
      const apiUrl = "https://tensorzero-agent.vercel.app";

      async function checkService(name, url, endpoint = "/health") {
        try {
          const response = await fetch(`${url}${endpoint}`, {
            method: "GET",
            mode: "cors",
            timeout: 5000,
          });
          if (response.ok) {
            return { status: "ok", message: `✅ ${name} Online` };
          } else {
            return {
              status: "error",
              message: `❌ ${name} Error (${response.status})`,
            };
          }
        } catch (error) {
          return { status: "error", message: `❌ ${name} Offline` };
        }
      }

      async function checkAll() {
        // Update status indicators
        document.getElementById("gateway-status").innerHTML =
          '<span class="loading">Checking...</span>';
        document.getElementById("router-status").innerHTML =
          '<span class="loading">Checking...</span>';
        document.getElementById("api-status").innerHTML =
          '<span class="loading">Checking...</span>';

        // Check services
        const [gateway, router, api] = await Promise.all([
          checkService("Gateway", gatewayUrl),
          checkService("Router", routerUrl),
          checkService("API", apiUrl),
        ]);

        // Update UI
        document.getElementById("gateway-status").innerHTML =
          `<span class="${gateway.status === "ok" ? "status" : "error"}">${gateway.message}</span>`;
        document.getElementById("router-status").innerHTML =
          `<span class="${router.status === "ok" ? "status" : "error"}">${router.message}</span>`;
        document.getElementById("api-status").innerHTML =
          `<span class="${api.status === "ok" ? "status" : "error"}">${api.message}</span>`;

        // Mock data for other metrics
        document.getElementById("activity").innerHTML =
          "Last video generated: 2 minutes ago<br>Requests today: 47<br>Success rate: 98%";
        document.getElementById("health").innerHTML =
          "CPU: 45%<br>Memory: 62%<br>Disk: 23%";
        document.getElementById("performance").innerHTML =
          "Avg response: 1.2s<br>Model accuracy: 94%<br>Cost savings: 35%";
      }

      // Auto-refresh every 30 seconds
      checkAll();
      setInterval(checkAll, 30000);
    </script>
  </body>
</html>
